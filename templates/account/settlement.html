{% extends 'layout.html' %}
{% load static i18n humanize %}
{% block title %}{% trans 'Settlement' %}{% endblock title %}

{% block extrastyles %}
{% endblock %}


{% block content %}

    <div class="app-content content">
      <div class="content-wrapper">
        <div class="content-header row">
          <div class="content-header-left col-md-8 col-12 mb-2 breadcrumb-new">
            <h3 class="content-header-title mb-0 d-inline-block">{% trans 'Settlement' %}</h3>
            <div class="row breadcrumbs-top d-inline-block">
              <div class="breadcrumb-wrapper col-12">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="{% url 'pesaify-account' %}">{% trans 'Account' %}</a>
                  </li>
                  <li class="breadcrumb-item active">{% trans 'Settlement' %}
                  </li>
                </ol>
              </div>
            </div>
          </div>
          <div class="content-header-right col-md-4 col-12 d-none d-md-inline-block">
            <div class="btn-group"><a class="btn btn-outline-info" href="{% url 'pesaify-account' %}">{% trans 'Back' %}</a></div>
            <div class="btn-group float-md-right"><a class="btn btn-info white" href="{% url 'pesaify-account-settlement-add' %}">{% trans 'Add Settlement Currency' %}</a></div>
          </div>
        </div>
        <div class="content-body">
            {% if not request.user.dismiss_message and request.user.message %}
            <div class="alert alert-dismissable alert-success">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true" id="dismiss">&times;</button>
                {{ request.user.message|safe }}
            </div>
            {% endif %}

            {% if request.user.settlements %}
            <div id="transactions">
                <div class="transactions-table-th d-none d-md-block">
                    <div class="col-12">
                        <div class="row px-1">
                            <div class="col-md-2 col-12 py-1">
                                <p class="mb-0">{% trans 'Active' %}</p>
                                <h2>{{ active }}</h2>
                            </div>
                            <div class="col-md-2 col-12 py-1">
                                <p class="mb-0">{% trans 'Inactive' %}</p>
                                <h2>{{ inactive }}</h2>
                            </div>
                            <div class="col-md-8 col-12 py-1 text-right">
                                <p class="mb-0">{% trans 'Settlement %' %}</p>
                                <h2 class="success">100%</h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="transactions-table-tbody row">
                    {% for settlement in request.user.settlements %}
                    <section class="card pull-up col-md-6">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-12 text-center">
                                            <p class="mb-0 text-right">
                                                <span class="d-inline-block d-md-none text-bold-700">{% trans 'Details' %}: </span>
                                                <a class="btn btn-default trash" href="#" data-target="{{ settlement.url }}"><i class="fa fa-trash fa-2x danger float-right"></i></a>
                                                {% if settlement.is_verified == '1' %}
                                                <a class="btn btn-default resend" href="#" data-target="{{ settlement.resend_mail_url }}"><i class="fa fa-envelope-o fa-2x info float-right"></i></a>
                                                {% endif %}
                                            </p>
                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Label' %}: </span>  {{ settlement.label }} </p>
                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Destination' %}: </span> {{ settlement.phone_number }}{{ settlement.address }}{{ settlement.account_number }}</span>  </p>
                                            {% if settlement.is_verified == "1" %}
                                            <span class="d-inline-block d-md-none text-bold-700 mb-2">{% trans 'Currency' %}: </span>  <a href="#" class="mb-0 btn-sm btn btn-outline-warning round">{{ settlement.category }}</a>
                                            <p class="mb-0 warning"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Status' %}: </span> pending</p>
                                            {% elif settlement.is_verified == "2" %}
                                            <span class="d-inline-block d-md-none text-bold-700 mb-2">{% trans 'Currency' %}: </span>  <a href="#" class="mb-0 btn-sm btn btn-outline-danger round">{{ settlement.category }}</a>
                                            <p class="mb-0 danger"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Status' %}: </span> unverified</p>
                                            {% elif settlement.is_verified == "4" %}
                                            <span class="d-inline-block d-md-none text-bold-700 mb-2">{% trans 'Currency' %}: </span>  <a href="#" class="mb-0 btn-sm btn btn-outline-info round">{{ settlement.category }}</a>
                                            <p class="mb-0 info"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Status' %}: </span> Under Review</p>
                                            {% else %}
                                            <span class="d-inline-block d-md-none text-bold-700 mb-2">{% trans 'Currency' %}: </span>  <a href="#" class="mb-0 btn-sm btn btn-outline-success round">{{ settlement.category }}</a>
                                            <p class="mb-0 success"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Status' %}: </span> verified</p>
                                            {% endif %}
                                            {% if settlement.country %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Country' %}: </span> {{ settlement.country.name }}</span>  </p>{% endif %}
                                            {% if settlement.name %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Account Name' %}: </span> {{ settlement.name }}</span>  </p>{% endif %}
                                            {% if settlement.address %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank Name' %}: </span> {{ settlement.address }}</span>  </p>{% endif %}
                                            {% if settlement.city %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank City' %}: </span> {{ settlement.city }}</span>  </p>{% endif %}
                                            {% if settlement.post_code %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank Post Code' %}: </span> {{ settlement.post_code }}</span>  </p>{% endif %}
                                            {% if settlement.swift_bic %}<p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank SWIFT/BIC' %}: </span> {{ settlement.swift_bic }}</span>  </p>{% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    {% endfor %}

                </div>

                    {% for settlement in request.user.settlements %}
                    <div class="modal fade" id="modal-delete-settlement-label-{{ settlement.id }}" tabindex="-1" role="dialog" aria-labelledby="modal-delete-item-label-{{ settlement.id }}" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modal-delete-settlement-label-{{ settlement.id }}">Settlement</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <section class="card pull-up col-md-6">
                                        <div class="card-content">
                                            <div class="card-body">
                                                <div class="col-12">
                                                    <div class="row">
                                                        <div class="col-12 text-center">
                                                            <p class="mb-0 text-right">
                                                                <span class="d-inline-block d-md-none text-bold-700">{% trans 'Details' %}: </span>
                                                                <a class="btn btn-default trash" href="#" data-target="{% if settlement.currency == 'MM' %}{% url 'mobile-money-detail' settlement.id %}{% elif settlement.currency == 'BTC' or settlement.currency == 'BCH' %}{% url 'crypto-currency-detail' settlement.id %}{% elif settlement.currency == 'UGX' or settlement.currency == 'KES' or settlement.currency == 'TZS' or settlement.currency == 'USD' or settlement.currency == 'EUR' or settlement.currency == 'GBP' %}{% url 'bank-detail' settlement.id %}{% endif %}"><i class="fa fa-trash fa-2x danger float-right"></i></a>
                                                                {% if settlement.is_verified == '1' %}
                                                                <a class="btn btn-default resend" href="#" data-target="{% if settlement.currency == 'MM' %}{% url 'mobile-money-resend' settlement.id %}{% elif settlement.currency == 'BTC' or settlement.currency == 'BCH' %}{% url 'crypto-currency-resend' settlement.id %}{% elif settlement.currency == 'UGX' or settlement.currency == 'KES' or settlement.currency == 'TZS' or settlement.currency == 'USD' or settlement.currency == 'EUR' or settlement.currency == 'GBP' %}{% url 'bank-resend' settlement.id %}{% endif %}"><i class="fa fa-envelope-o fa-2x info float-right"></i></a>
                                                                {% endif %}
                                                            </p>
                                                            <span class="d-inline-block d-md-none text-bold-700 mb-2">{% trans 'Currency' %}: </span>  <a href="#" class="mb-0 btn-sm btn btn-outline-{% if settlement.is_verified == "1" %}warning{% elif settlement.is_verified == "2" %}danger{% elif settlement.is_verified == "4" %}info{% else %}success{% endif %} round">{% if settlement.currency == 'BTC' %}Bitcion{% elif settlement.currency == 'BCH' %}BitCash{% elif settlement.currency == 'MM' %}Mobile Money{% else %}Bank Account {{ settlement.currency }}{% endif %}</a>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Label' %}: </span>  {{ settlement.label }} </p>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Destination' %}: </span> {% if settlement.currency == 'MM' %}{{ settlement.phone_number }}{% elif settlement.currency == 'BTC' or settlement.currency == 'BCH' %}{{ settlement.address }}{% elif settlement.currency == 'UGX' or settlement.currency == 'KES' or settlement.currency == 'TZS' or settlement.currency == 'USD' or settlement.currency == 'EUR' or settlement.currency == 'GBP' %}{{ settlement.account_number }}{% endif %}</span>  </p>
                                                            <p class="mb-0 {% if settlement.is_verified == "1" %}warning{% elif settlement.is_verified == "2" %}danger{% elif settlement.is_verified == "4" %}info{% else %}success{% endif %}"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Status' %}: </span> {% if settlement.is_verified == "1" %}pending{% elif settlement.is_verified == "2" %}unverified{% elif settlement.is_verified == "4" %}Under Review{% else %}verified{% endif %}</p>
                                                            {% if not settlement.currency == 'BTC' and not settlement.currency == 'BCH' %}
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Country' %}: </span> {{ settlement.country.name }}</span>  </p>
                                                            {% endif %}
                                                            {% if settlement.currency == 'UGX' or settlement.currency == 'KES' or settlement.currency == 'TZS' or settlement.currency == 'USD' or settlement.currency == 'EUR' or settlement.currency == 'GBP' %}
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Account Name' %}: </span> {{ settlement.name }}</span>  </p>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank Name' %}: </span> {{ settlement.address }}</span>  </p>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank City' %}: </span> {{ settlement.city }}</span>  </p>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank Post Code' %}: </span> {{ settlement.post_code }}</span>  </p>
                                                            <p class="mb-0"><span class="d-inline-block text-bold-700 mb-2">{% trans 'Bank SWIFT/BIC' %}: </span> {{ settlement.swift_bic }}</span>  </p>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div>

                    {% endfor %}

            </div>
            {% else %}
            <div class="col-12 col-md-6 offset-md-3">
                <div class="">
                    <div class="card-content collapse show">
                        <div class="text-center card-body">
                            <div class="row clearfix mb-2">
                                <div class="col-12">
                                    <img class="verify-image" src="{% static 'pesaify/images/no-payments.svg' %}" width="75px" height="75px" alt="">
                                </div>
                            </div>
                            <p class="text-bold-700 text-uppercase mb-0 text-success">{% trans 'Settlement Information' %}</p>
                            <p class="mt-2">{% trans "Pesaify supports settlement in through mobile money and direct bank deposit in 160 countries." %}</p>
                            <p class="text-bold-500 text-uppercase mt-2 text-info">{% trans 'Bitcoin settlements are supported in all countries.' %}</p>
                            <div class="btn-group center"><a class="btn btn-info white" href="{% url 'pesaify-account-settlement-add' %}">{% trans 'Add Settlement Currency' %}</a></div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}


{% block scripts %}
    {{ block.super }}
{% endblock %}

{% block onbodyload %}
    {{ block.super }}
    {% if request.user.mobilemoneysettlementpending.count > 0 or request.user.cryptosettlementpending.count > 0 or request.user.banksettlementpending.count > 0 %}
    $.notify({
        icon: "{% static 'pesaify/images/alert-circle-exc.svg' %}",
        title: ' Confirm Settlement Settings Change ',
        message: ' To finish saving your new settlement changes, check your email for a confirmation link. <br>This link is only valid for 10 minutes after being sent.'
    },{
        type: 'minimalist',
        delay: 15000,
        placement: {
            from: "top",
            align: "right"
        },
        animate: {
            enter: 'animated fadeInLeftBig',
            exit: 'animated fadeOutLeftBig'
        },
        icon_type: 'image',
        template: '<div data-notify="container" class="alert alert-{0} card" role="alert">' +
            '<div id="image">' +
            '<img data-notify="icon" class="rounded-circle float-left" height="80px">' +
            '</div><div id="text">' +
            '<span data-notify="title">{1}</span><br>' +
            '<span data-notify="message">{2}</span><br>' +
            '</div>'+
        '</div>'
    });

    var snd = new  Audio(`data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=`);
    snd.play();

    {% endif %}
    $('.trash').on('click', function(e){
        e.preventDefault();
        var ele = this;
        $(this).html("<img src='{% static 'pesaify/images/loading.gif' %}' alt='' width='25' height='25'>");
        $.ajax({
            url: $(this).attr('data-target'),
            beforeSend: function(xhr) {
                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
            },
            type: 'DELETE',
            success: function(jqXHR, textStatus, errorThrown){
                window.location = '{% url "pesaify-account-settlement" %}'
            },
            error: function(jqXHR, textStatus, errorThrown) {
                $(ele).html('<i class="fa fa-trash fa-2x danger float-right"></i>');
                $.notify({
                    icon: "{% if request.user.get_photo %}{{ request.user.get_photo }}{% else %}{% static 'pesaify/avatars/avatar-1.png' %}{% endif %}",
                    title: 'Failed to delete settlement',
                    message: jqXHR.responseJSON['detail']
                },{
                    type: 'minimalist',
                    delay: 10000,
                    placement: {
                        from: "top",
                        align: "right"
                    },
                    animate: {
                        enter: 'animated fadeInLeftBig',
                        exit: 'animated fadeOutLeftBig'
                    },
                    icon_type: 'image',
                    template: '<div data-notify="container" class="alert alert-{0} card" role="alert">' +
                        '<div id="image">' +
                        '<img data-notify="icon" class="rounded-circle float-left" height="80px">' +
                        '</div><div id="text">' +
                        '<span data-notify="title">{1}</span><br>' +
                        '<span data-notify="message">{2}</span><br>' +
                        '</div>'+
                    '</div>'
                });

                var snd = new  Audio(`data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=`);
                snd.play();

            },
        });
    });
    $('.resend').on('click', function(e){
        e.preventDefault();
        var ele = this;
        $(this).html("<img src='{% static 'pesaify/images/loading.gif' %}' alt='' width='25' height='25'>");
        $.ajax({
            url: $(this).attr('data-target'),
            beforeSend: function(xhr) {
                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
            },
            type: 'GET',
            success: function(jqXHR, textStatus, errorThrown){
                $.notify({
                    icon: "{% if request.user.get_photo %}{{ request.user.get_photo }}{% else %}{% static 'pesaify/avatars/avatar-1.png' %}{% endif %}",
                    title: 'Confirmation Email',
                    message: 'A confirmation email has been sent. It will expire in 10 minutes.'
                },{
                    type: 'minimalist',
                    delay: 10000,
                    placement: {
                        from: "top",
                        align: "right"
                    },
                    animate: {
                        enter: 'animated fadeInLeftBig',
                        exit: 'animated fadeOutLeftBig'
                    },
                    icon_type: 'image',
                    template: '<div data-notify="container" class="alert alert-{0} card" role="alert">' +
                        '<div id="image">' +
                        '<img data-notify="icon" class="rounded-circle float-left" height="80px">' +
                        '</div><div id="text">' +
                        '<span data-notify="title">{1}</span><br>' +
                        '<span data-notify="message">{2}</span><br>' +
                        '</div>'+
                    '</div>'
                });

                var snd = new  Audio(`data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=`);
                snd.play();
            },
            error: function(jqXHR, textStatus, errorThrown) {
                $(ele).html('<i class="fa fa-envelope-o fa-2x info float-right"></i>');
                $.notify({
                    icon: "{% if request.user.get_photo %}{{ request.user.get_photo }}{% else %}{% static 'pesaify/avatars/avatar-1.png' %}{% endif %}",
                    title: 'Failed to resend settlement email',
                    message: jqXHR.responseJSON['detail']
                },{
                    type: 'minimalist',
                    delay: 10000,
                    placement: {
                        from: "top",
                        align: "right"
                    },
                    animate: {
                        enter: 'animated fadeInLeftBig',
                        exit: 'animated fadeOutLeftBig'
                    },
                    icon_type: 'image',
                    template: '<div data-notify="container" class="alert alert-{0} card" role="alert">' +
                        '<div id="image">' +
                        '<img data-notify="icon" class="rounded-circle float-left" height="80px">' +
                        '</div><div id="text">' +
                        '<span data-notify="title">{1}</span><br>' +
                        '<span data-notify="message">{2}</span><br>' +
                        '</div>'+
                    '</div>'
                });

                var snd = new  Audio(`data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=`);
                snd.play();

            },
        });
    });

function updateDonutChart (el, percent, donut) {
    percent = Math.round(percent);
    if (percent > 100) {
        percent = 100;
    } else if (percent < 0) {
        percent = 0;
    }
    var deg = Math.round(360 * (percent / 100));

    if (percent > 50) {
        $(el + ' .pie').css('clip', 'rect(auto, auto, auto, auto)');
        $(el + ' .right-side').css('transform', 'rotate(180deg)');
    } else {
        $(el + ' .pie').css('clip', 'rect(0, 1em, 1em, 0.5em)');
        $(el + ' .right-side').css('transform', 'rotate(0deg)');
    }
    if (donut) {
        $(el + ' .right-side').css('border-width', '0.1em');
        $(el + ' .left-side').css('border-width', '0.1em');
        $(el + ' .shadow').css('border-width', '0.1em');
    } else {
        $(el + ' .right-side').css('border-width', '0.5em');
        $(el + ' .left-side').css('border-width', '0.5em');
        $(el + ' .shadow').css('border-width', '0.5em');
    }
    $(el + ' .num').text(percent);
    $(el + ' .left-side').css('transform', 'rotate(' + deg + 'deg)');
}

// Pass in a number for the percent
updateDonutChart('#specificChart', 66.67, true);

//Ignore the rest, it's for the input and checkbox

$('#percent').change(function () {
    var percent = $(this).val();
    var donut = $('#donut input').is(':checked');
    updateDonutChart('#specificChart', percent, donut);
}).keyup(function () {
    var percent = $(this).val();
    var donut = $('#donut input').is(':checked');
    updateDonutChart('#specificChart', percent, donut);
});;

$('#donut input').change(function () {
    var donut = $('#donut input').is(':checked');
    var percent = $("#percent").val();
    if (donut) {
        $('#donut span').html('Donut');
    } else {
        $('#donut span').html('Pie');
    }
    updateDonutChart('#specificChart', percent, donut);
});

{% endblock %}
